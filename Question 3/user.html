<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous">
    </script>
 <script>
$(document).ready(function(){
           $('#show').click(function(){
                var url="http://localhost:3004/checkUser?username="+$('#uname').val()
                $.get(url,function(data,status){
    
                        if(data)
                        {
                            alert("enter the different username");
                        }
                        else
                        {
                            checkother();
                        }
                
})
            })
        });
    function checkother()
    {
           var pwd=/^(?=.*[a-z][!@#$%^&*])(?=.*[A-Z][!@#$%^&*])(?=.*[0-9][!@#$%^&*])/;
            var uppercase=/[A-Z]/;
            var lowercase=/[a-z]/;
            var number=/[0-9]/;
            var mail=/[a-zA-Z0-9.]+@[a-z]+\.[a-z]/
            var specialcharcter=/[!@#$%^&*]/;
            var flag=0;
            var name=document.getElementById("uname").value;
            var password=document.getElementById("upassword").value;
            var email=document.getElementById("uemail").value;
            var phone=document.getElementById("uphone").value;
            var city=document.getElementById("ucity").value;
            var atpos=email.indexOf("@");
            var dotpos=email.lastIndexOf(".");
            if(name.length<=5)
            {alert("user name is too short");flag=1;}
            else if(name.length>=15)
            {alert("user name is too long");flag=1;}
            else if(!((password.match(uppercase))&&(password.match(lowercase))&&(password.match(number))&&(password.match(specialcharcter))))
            {
                alert("Password should contain atleast one uppercase letter, one lowercase letter,one digit and one special character");
                flag=1;
            }
            
            else if(atpos<1 || dotpos<atpos+2 || dotpos+2>email.length){
               
                alert("invalid mail id");flag=1;
            }
            else if(phone.length>0)
            {
                if(phone.length<10 || phone.length>10)
               { alert("Not a valid phone number") ;flag=1;}
            }
            
            else if(name.length==0||password.length==0||email.length==0||phone.length==0||city.length==0)
            {
            alert("Please Enter all Feilds");
            
            flag=1;
            }
            else{

            }
            
            if(flag==0)
            {debugger
            alert("User registration is successfull");
            if (document.contains(document.getElementById("display")))
            document.getElementById("display").remove();
            var div=document.createElement("div");
            div.id="display";
            var n=document.createElement("P");
            n.innerHTML="Name: "+name;
            var pass=document.createElement("P");
            pass.innerHTML="Password: "+password;
             var e=document.createElement("P");
            e.innerHTML="Email: "+email;
             var ph=document.createElement("P");
            ph.innerHTML="Phone: "+phone;
             var cit=document.createElement("P");
            cit.innerHTML="City: "+city;
            div.appendChild(n);
            div.appendChild(pass);
            div.appendChild(e);
            div.appendChild(ph);
            div.appendChild(cit);
            document.body.appendChild(div);
            }
            else
            {
              if (document.contains(document.getElementById("display")))
              document.getElementById("display").remove();
            }
    }
 </script>
</head>
<body>
  <h1>Registration Form</h1><hr/>
  <div>
      <p>Enter Name    : <input type="text" id="uname"></p>
      <p>Enter Password: <input type="password" id="upassword"></p>
      <p>Enter Email id: <input type="email" id="uemail"></p>
      <p>Enter Phone No: <input type="string" id="uphone"></p>
      <p>Enter City    : <input type="text" id="ucity"></p>
      <p><button id="show">Submit</button> <button onclick="clearb()">Clear</button></p>
  </div>  
</body>
</html>
	
